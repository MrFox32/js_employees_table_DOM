{"version":3,"sources":["scripts/main.js"],"names":["selectedRow","table","document","querySelector","tBody","sortedCols","cellEditing","cellInput","initialCellText","getSalary","salary","innerText","slice","split","join","sortByText","rowsArray","index","inverseSort","sort","a","b","cells","localeCompare","sortByAge","sortBySalary","sortTable","columnIndex","columnType","rows","sortInversely","row","push","append","createForm","form","createElement","classList","add","innerHTML","pushNotification","posTop","posRight","title","description","type","messageBlock","setAttribute","style","top","right","appendChild","setTimeout","remove","employeeForm","submitBtn","addEventListener","e","preventDefault","formName","formPosition","formOffice","formAge","formSalary","value","errorCount","trim","length","toLocaleString","target","parentNode","indexOf","toLowerCase","closest","eInput","key"],"mappings":"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","file":"main.63b3aff5.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst table = document.querySelector('table');\nconst tBody = table.querySelector('tbody');\nconst sortedCols = {};\nlet cellEditing = null;\nlet cellInput = null;\nlet initialCellText = '';\nlet selectedRow;\n\nconst getSalary = (salary) => {\n  return salary.innerText.slice(1).split(',').join('');\n};\n\nconst sortByText = (rowsArray, index, inverseSort) => {\n  if (inverseSort === true) {\n    rowsArray.sort((a, b) => -a.cells[index].innerText\n      .localeCompare(b.cells[index].innerText));\n  } else {\n    rowsArray.sort((a, b) => a.cells[index].innerText\n      .localeCompare(b.cells[index].innerText));\n  }\n};\n\nconst sortByAge = (rowsArray, index, inverseSort) => {\n  if (inverseSort === true) {\n    rowsArray.sort((a, b) => -(+a.cells[index].innerText\n    - +b.cells[index].innerText));\n  } else {\n    rowsArray.sort((a, b) => +a.cells[index].innerText\n    - +b.cells[index].innerText);\n  }\n};\n\nconst sortBySalary = (rowsArray, index, inverseSort) => {\n  if (inverseSort === true) {\n    rowsArray.sort((a, b) =>\n      -(+getSalary(a.cells[index]) - +getSalary(b.cells[index]))\n    );\n  } else {\n    rowsArray.sort((a, b) =>\n      +getSalary(a.cells[index]) - +getSalary(b.cells[index])\n    );\n  }\n};\n\nconst sortTable = (columnIndex, columnType) => {\n  if (columnIndex === -1) {\n    return;\n  }\n\n  const rows = [];\n  let sortInversely;\n\n  if (sortedCols[columnType] === 'ASC') {\n    sortInversely = true;\n    sortedCols[columnType] = 'DESC';\n  } else {\n    sortInversely = false;\n    sortedCols[columnType] = 'ASC';\n  }\n\n  for (const row of tBody.rows) {\n    rows.push(row);\n  }\n\n  switch (columnType) {\n    case 'age':\n      sortByAge(rows, columnIndex, sortInversely);\n      break;\n\n    case 'salary':\n      sortBySalary(rows, columnIndex, sortInversely);\n      break;\n\n    default:\n      sortByText(rows, columnIndex, sortInversely);\n      break;\n  }\n\n  for (const row of rows) {\n    tBody.append(row);\n  }\n};\n\nconst createForm = () => {\n  const form = document.createElement('form');\n\n  form.classList.add('new-employee-form');\n\n  form.innerHTML = `\n  <label for=\"name\">\n    Name:\n    <input id=\"name\" data-qa=\"name\" type=\"text\" required>\n  </label>\n  <label for=\"position\">\n    Position:\n    <input id=\"position\" data-qa=\"position\" type=\"text\" required>\n  </label>\n  <label for=\"office\">\n    Office:\n    <select id=\"office\" data-qa=\"office\" required>\n      <option value=\"Tokyo\">\n        Tokyo\n      </option>\n      <option value=\"Singapore\">\n        Singapore\n      </option>\n      <option value=\"London\">\n        London\n      </option>\n      <option value=\"New York\">\n        New York\n      </option>\n      <option value=\"Edinburgh\">\n        Edinburgh\n      </option>\n      <option value=\"San Francisco\">\n        San Francisco\n      </option>\n    </select>\n  </label>\n  <label for=\"age\">\n    Age:\n    <input id=\"age\" data-qa=\"age\" type=\"number\" required>\n  </label>\n  <label for=\"salary\">\n    Salary:\n    <input id=\"salary\" data-qa=\"salary\" type=\"number\" required>\n  </label>\n  <button type=\"submit\">Save to table</button>\n  `;\n\n  return form;\n};\n\nconst pushNotification = (posTop, posRight, title, description, type) => {\n  const messageBlock = document.createElement('div');\n\n  messageBlock.classList.add('notification', type);\n  messageBlock.setAttribute('data-qa', 'notification');\n\n  messageBlock.innerHTML = `\n    <h2 class=\"title\">\n      ${title}\n    </h2>\n    <p>\n      ${description}\n    </p>\n  `;\n\n  messageBlock.style.top = posTop + 'px';\n  messageBlock.style.right = posRight + 'px';\n\n  document.querySelector('body').appendChild(messageBlock);\n\n  setTimeout(() => {\n    messageBlock.remove();\n  }, 5000);\n};\n\nconst employeeForm = createForm();\nconst submitBtn = employeeForm.querySelector('button');\n\ndocument.querySelector('body').appendChild(employeeForm);\n\nsubmitBtn.addEventListener('click', e => {\n  e.preventDefault();\n\n  const row = document.createElement('tr');\n  const formName = employeeForm.querySelector('#name');\n  const formPosition = employeeForm.querySelector('#position');\n  const formOffice = employeeForm.querySelector('#office');\n  const formAge = employeeForm.querySelector('#age');\n  const formSalary = employeeForm.querySelector('#salary');\n  const salary = +formSalary.value;\n  let errorCount = 0;\n\n  if (formPosition.value === '' || formSalary.value === '') {\n    pushNotification(\n      10,\n      10,\n      'All fields must be filled',\n      `Some fields are not filled with valuesðŸ˜• `,\n      'error'\n    );\n    errorCount++;\n  }\n\n  if (formName.value.trim().length < 4) {\n    pushNotification(\n      10,\n      10,\n      'Name is invalid',\n      `Name is shorter than 4 letters, \n        ${formName.value} is to small...ðŸ¤­ can you change it?ðŸ¤”`,\n      'error'\n    );\n\n    errorCount++;\n  }\n\n  if (formAge.value < 18 || formAge.value > 90) {\n    pushNotification(\n      errorCount > 0 ? errorCount * 140 + 10 : 10,\n      10,\n      'Age is invalid',\n      `The person is too ${formAge.value < 18 ? 'youngðŸ‘¶' : 'oldðŸ§“'}`,\n      'error'\n    );\n\n    errorCount++;\n  }\n\n  if (errorCount === 0) {\n    row.innerHTML = `\n    <td>\n      ${formName.value.trim()}\n    </td>\n    <td>\n      ${formPosition.value.trim()}\n    </td>\n    <td>\n      ${formOffice.value}\n    </td>\n    <td>\n      ${formAge.value}\n    </td>\n    <td>\n      $${salary.toLocaleString('en-US')}\n    </td>\n  `;\n\n    tBody.appendChild(row);\n\n    formName.value = '';\n    formPosition.value = '';\n    formOffice.value = 'Tokyo';\n    formAge.value = '';\n    formSalary.value = '';\n\n    pushNotification(\n      10,\n      10,\n      'New employee was successfully added',\n      `ðŸ¥³ðŸ¾ðŸ¥‚ðŸŽ‚`,\n      'success'\n    );\n  }\n});\n\ntable.addEventListener('click', e => {\n  if (e.target.parentNode.parentNode !== table.querySelector('thead')) {\n    return;\n  }\n\n  sortTable(\n    [...e.target.parentNode.cells].indexOf(e.target),\n    e.target.innerText.toLowerCase()\n  );\n});\n\ntBody.addEventListener('click', e => {\n  const row = e.target.closest('tr');\n\n  if (selectedRow) {\n    selectedRow.classList.remove('active');\n  }\n  row.classList.add('active');\n  selectedRow = row;\n});\n\ntBody.addEventListener('dblclick', e => {\n  if (cellEditing) {\n    return;\n  }\n  cellEditing = e.target.closest('td');\n  cellInput = document.createElement('input');\n  cellInput.classList.add('cell-input');\n  cellInput.value = cellEditing.innerText;\n  initialCellText = cellEditing.innerText;\n  cellEditing.innerText = '';\n  cellEditing.append(cellInput);\n\n  cellInput.addEventListener('blur', eInput => {\n    if (cellInput.value.trim() !== '') {\n      cellEditing.innerText = cellInput.value;\n    } else {\n      cellEditing.innerText = initialCellText;\n    }\n    cellInput.remove();\n    cellEditing = null;\n  });\n});\n\ntBody.addEventListener('keydown', e => {\n  if (e.key === 'Enter') {\n    if (cellInput.value !== '') {\n      cellEditing.innerText = cellInput.value;\n    } else {\n      cellEditing.innerText = initialCellText;\n    }\n    cellInput.remove();\n    cellEditing = null;\n  }\n});\n"]}